# Домашнее задание к занятию "08.02 Работа с Playbook"
## Подготовка к выполнению
1. Создайте свой собственный (или используйте старый) публичный репозиторий на github с произвольным именем.  
2. Скачайте playbook из репозитория с домашним заданием и перенесите его в свой репозиторий.  
3. Подготовьте хосты в соответствии с группами из предподготовленного playbook.  

## Основная часть
1. Приготовьте свой собственный inventory файл prod.yml.  

```
---
clickhouse:
  hosts:
    clickhouse-01:
      ansible_connection: local
```

2. Допишите playbook: нужно сделать ещё один play, который устанавливает и настраивает vector.  

Ох, не без помощи из чатика телеграмма пришлось всё перебирать, очень было больно =)

3. При создании tasks рекомендую использовать модули: get_url, template, unarchive, file.  
4. Tasks должны: скачать нужной версии дистрибутив, выполнить распаковку в выбранную директорию, установить vector.  

https://packages.timber.io/vector/latest/vector-0.22.2-1.x86_64.rpm - качаем для Centos

5. Запустите ansible-lint site.yml и исправьте ошибки, если они есть.

![ДЗ-5](https://user-images.githubusercontent.com/93204208/175831615-6038de96-bab0-482f-8078-a7f864a3bc62.PNG)


6. Попробуйте запустить playbook на этом окружении с флагом --check.  

![ДЗ-6](https://user-images.githubusercontent.com/93204208/175831612-07748aa6-1c7e-4688-aa08-ea5a10f645f1.PNG)


7. Запустите playbook на prod.yml окружении с флагом --diff. Убедитесь, что изменения на системе произведены.

![ДЗ-7](https://user-images.githubusercontent.com/93204208/175831622-c13c31c1-30e2-4c57-bb72-17d40163bfa3.PNG)


8. Повторно запустите playbook с флагом --diff и убедитесь, что playbook идемпотентен.  

![ДЗ-8](https://user-images.githubusercontent.com/93204208/175831627-c0892dfd-3e41-4d0b-9211-681896ab862f.PNG)


9. Подготовьте README.md файл по своему playbook. В нём должно быть описано: что делает playbook, какие у него есть параметры и теги.  
10. Готовый playbook выложите в свой репозиторий, поставьте тег 08-ansible-02-playbook на фиксирующий коммит, в ответ предоставьте ссылку на него.  
